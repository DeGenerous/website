---
import { SEO } from "astro-seo";
import { seoConfig } from "../../utils/seoConfig";

import "/src/styles/index.scss";

import Header from "@components/utils/Header.svelte";
import Footer from "@components/utils/Footer.svelte";

import Scramble from "@components/utils/Scramble.svelte";
import Background from "@components/utils/Background.svelte";
import Modal from "@components/utils/Modal.svelte";
import ToastContainer from "@components/utils/ToastContainer.svelte";
import Cursor from "@components/cursor/App.svelte";
import CookieBanner from "@components/utils/CookieBanner.svelte";

type LayoutProps = {
  nav?: string;
  title?: string;
  ogTitle?: string;
  description?: string;
  image?: string;
  imageType?: string;
  url?: string;
  type?: string;
  disableIndexing?: boolean;
  narrow?: boolean;
};

const {
  title = "DGRS | AI Storytelling",
  description = "We're building a decentralized entertainment platform for the GenAI era. Play interactive story games or create your own visual novel with branching choices.",
  image = "/favicon.ico",
  nav = "home",
  url = "https://degenerousdao.com/",
  type = "website",
  ogTitle,
  disableIndexing = false,
} = Astro.props as LayoutProps;
---

<html lang="en">
  <head>
    <title>{title}</title>
    <meta charset="utf-8" />
    <meta name="description" content={description} />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="preconnect" href="https://media.degenerousdao.com" crossorigin />
    <meta
      http-equiv="Content-Security-Policy"
      content="upgrade-insecure-requests"
    />
    <SEO
      title={title}
      description={seoConfig.description || description}
      noindex={disableIndexing}
      nofollow={disableIndexing}
      openGraph={{
        basic: {
          title: ogTitle || title,
          type: "website",
          image: seoConfig.image.url || image,
        },
        image: {
          width: seoConfig.image.width,
          height: seoConfig.image.height,
          alt: seoConfig.image.alt || title,
        },
        optional: {
          siteName: seoConfig.siteName,
          description: seoConfig.description || description,
        },
      }}
      twitter={{
        card: "summary_large_image",
      }}
    />
    <link rel="canonical" href={(seoConfig.baseURL?.replace(/\/$/, "") || "") + (Astro.url?.pathname || "/")} />
  </head>
  <body class={nav}>
    <a href="#content" class="skip-link">Skip to content</a>
    <Scramble client:idle />
    <Header activeTab={nav} client:idle />
    <main id="content">
      <slot />
    </main>
    <Footer client:visible />
    <Background client:visible />
    <Modal client:idle />
    <ToastContainer client:idle />
    <Cursor client:idle />
    <CookieBanner client:idle />
  </body>
</html>

<!-- Copyright DGRS Labs Pte. Ltd. - All Rights Reserved
Unauthorized copying of this file, via any medium is strictly prohibited
Proprietary and confidential -->
